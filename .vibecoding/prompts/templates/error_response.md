# 錯誤處理響應模板

---

**適用場景:** 當 AI 服務遇到錯誤或異常時的標準響應格式  
**輸出類型:** 錯誤處理與問題解決報告  
**格式標準:** 基於 FANG 級企業文檔規範

---

## 📝 標準輸出格式

```markdown
# {{ 功能/服務名稱 }} - 錯誤處理報告

---

**執行狀態 (Status):** ❌ 執行失敗
**錯誤類型 (Error Type):** {{ 錯誤分類 }}
**錯誤代碼 (Error Code):** {{ 錯誤編號 }}
**執行時間 (Duration):** {{ 失敗前耗時 }}
**責任工程師 (Owner):** VibeCoding {{ 服務名稱 }}
**最後更新 (Last Updated):** {{ 時間戳 }}

---

## 1. 錯誤摘要 (Error Summary)

### 1.1 錯誤描述 (Error Description)
**主要錯誤:** {{ 簡潔的錯誤描述 }}

**詳細說明:**
{{ 詳細的錯誤情況說明，包含上下文和觸發條件 }}

**影響範圍 (Impact Scope):**
- 受影響功能: {{ 功能清單 }}
- 受影響用戶: {{ 用戶範圍 }}
- 數據完整性: {{ 數據狀態 }}

### 1.2 錯誤分類 (Error Classification)
| 分類 | 詳情 | 嚴重程度 | 修復優先級 |
|------|------|----------|------------|
| 錯誤類型 | {{ 系統錯誤/用戶錯誤/數據錯誤 }} | {{ 高/中/低 }} | {{ P0/P1/P2 }} |
| 錯誤來源 | {{ 具體來源模組或函數 }} | {{ 嚴重程度 }} | {{ 優先級 }} |

---

## 2. 技術診斷 (Technical Diagnosis)

### 2.1 錯誤堆疊 (Error Stack Trace)
```
{{ 完整的錯誤堆疊信息 }}
```

### 2.2 系統環境 (System Environment)
**運行環境:**
- 操作系統: {{ OS版本 }}
- 運行環境版本: {{ 環境版本 }}
- 服務版本: {{ 服務版本 }}
- 相關依賴: {{ 關鍵依賴版本 }}

**系統狀態:**
- CPU 使用率: {{ CPU% }}
- 記憶體使用: {{ 記憶體使用量 }}
- 磁碟空間: {{ 可用空間 }}
- 網路狀態: {{ 連接狀態 }}

### 2.3 輸入數據分析 (Input Data Analysis)
**用戶輸入:**
```json
{{ 導致錯誤的輸入數據 }}
```

**數據驗證結果:**
- 格式驗證: {{ 通過/失敗 }}
- 範圍檢查: {{ 通過/失敗 }}
- 業務邏輯驗證: {{ 通過/失敗 }}

---

## 3. 根本原因分析 (Root Cause Analysis)

### 3.1 問題根源 (Root Cause)
**主要原因:** {{ 根本原因描述 }}

**貢獻因素:**
1. {{ 因素1 }}: {{ 說明 }}
2. {{ 因素2 }}: {{ 說明 }}
3. {{ 因素3 }}: {{ 說明 }}

### 3.2 為什麼分析 (5 Whys Analysis)
1. **為什麼發生錯誤?** {{ 直接原因 }}
2. **為什麼會有這個直接原因?** {{ 第二層原因 }}
3. **為什麼會導致第二層原因?** {{ 第三層原因 }}
4. **為什麼會出現第三層原因?** {{ 第四層原因 }}
5. **為什麼會有第四層原因?** {{ 根本原因 }}

---

## 4. 緊急應對措施 (Immediate Response)

### 4.1 已執行的緊急措施 (Emergency Actions Taken)
- ✅ {{ 措施1 }}: {{ 執行結果 }}
- ✅ {{ 措施2 }}: {{ 執行結果 }}
- ⚠️ {{ 措施3 }}: {{ 部分成功/失敗原因 }}

### 4.2 系統恢復狀態 (System Recovery Status)
| 系統組件 | 恢復狀態 | 功能可用性 | 備註 |
|----------|----------|------------|------|
| {{ 組件1 }} | ✅ 已恢復 | 100% | {{ 備註 }} |
| {{ 組件2 }} | ⚠️ 部分恢復 | 80% | {{ 限制說明 }} |
| {{ 組件3 }} | ❌ 未恢復 | 0% | {{ 問題描述 }} |

---

## 5. 解決方案與修復計劃 (Solution & Fix Plan)

### 5.1 短期修復 (Short-term Fix)
**修復策略:** {{ 短期解決方案 }}

**實施步驟:**
1. [ ] {{ 步驟1 }} - {{ 負責人 }} - {{ 期限 }}
2. [ ] {{ 步驟2 }} - {{ 負責人 }} - {{ 期限 }}
3. [ ] {{ 步驟3 }} - {{ 負責人 }} - {{ 期限 }}

**預期效果:**
- 功能恢復時間: {{ 預估時間 }}
- 影響範圍: {{ 恢復範圍 }}

### 5.2 長期修復 (Long-term Fix)
**永久解決方案:** {{ 長期解決策略 }}

**架構改進:**
- {{ 改進項目1 }}: {{ 說明 }}
- {{ 改進項目2 }}: {{ 說明 }}

### 5.3 預防措施 (Prevention Measures)
**流程改進:**
- 增強錯誤檢測機制
- 改善輸入驗證邏輯
- 加強監控與告警

**技術改進:**
- 代碼審查標準更新
- 自動化測試覆蓋增強
- 錯誤處理機制優化

---

## 6. 測試與驗證 (Testing & Validation)

### 6.1 修復驗證 (Fix Verification)
**測試計劃:**
```bash
# 重現錯誤
{{ 重現步驟 }}

# 驗證修復
{{ 驗證命令 }}

# 回歸測試
{{ 回歸測試命令 }}
```

### 6.2 品質保證 (Quality Assurance)
**檢查清單:**
- [ ] 錯誤不再重現
- [ ] 相關功能正常運作
- [ ] 性能無明顯下降
- [ ] 日誌記錄完整

---

## 7. 後續行動項目 (Follow-up Actions)

### 7.1 立即行動 (Immediate Actions)
- [ ] 完成緊急修復部署 - {{ 負責人 }} - {{ 期限 }}
- [ ] 通知受影響用戶 - {{ 負責人 }} - {{ 期限 }}
- [ ] 更新狀態頁面 - {{ 負責人 }} - {{ 期限 }}

### 7.2 中期改進 (Medium-term Improvements)
- [ ] 完成根本原因修復
- [ ] 更新錯誤處理文檔
- [ ] 加強監控告警

### 7.3 長期優化 (Long-term Optimization)
- [ ] 架構設計改進
- [ ] 開發流程優化
- [ ] 團隊培訓加強

---

## 8. 經驗教訓 (Lessons Learned)

### 8.1 做得好的地方 (What Went Well)
- {{ 正面經驗1 }}
- {{ 正面經驗2 }}

### 8.2 需要改進的地方 (What Could Be Improved)
- {{ 改進點1 }}: {{ 具體改進建議 }}
- {{ 改進點2 }}: {{ 具體改進建議 }}

### 8.3 知識分享 (Knowledge Sharing)
**內部分享:**
- 技術團隊分享會議
- 錯誤處理最佳實踐更新
- 文檔知識庫更新

---

**審核與簽署 (Review & Approval):**
- **技術審核:** ✅ Error Analysis Validated
- **修復審核:** ✅ Solution Approved
- **品質審核:** ✅ Fix Quality Verified
- **發布審核:** ✅ Deployment Ready

---

**相關文檔連結 (Related Documentation):**
- [事故報告詳細版]({{ 事故報告連結 }})
- [修復代碼變更]({{ 代碼變更連結 }})
- [測試結果報告]({{ 測試報告連結 }})
- [用戶通知記錄]({{ 通知記錄連結 }})
```

## 💡 使用變數說明

此模板中的變數應在實際使用時替換：

- `{{ 功能/服務名稱 }}`: 發生錯誤的功能或服務名稱
- `{{ 錯誤分類 }}`: 錯誤的具體分類 (系統錯誤、用戶錯誤等)
- `{{ 錯誤編號 }}`: 內部錯誤追蹤編號
- `{{ 簡潔的錯誤描述 }}`: 一句話概括錯誤內容
- `{{ 詳細的錯誤情況說明 }}`: 完整的錯誤描述和上下文
- 其他變數類推...

## 🎯 錯誤處理品質標準

每次錯誤處理都應確保：
1. **準確性**: 錯誤信息準確且詳細
2. **完整性**: 涵蓋問題診斷、解決方案、預防措施
3. **可操作性**: 提供明確的修復步驟和時間表
4. **學習性**: 從錯誤中提取有價值的經驗教訓
5. **透明性**: 向利害關係人提供適當的信息透明度 